<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Guitar Trainer</title>

  <script>
    window.__BUILD__ = "GT-001";
  </script>

  <link rel="stylesheet" href="styles.css?v=GT-001" />
</head>
<body>
  <header>
    <h1>Guitar Trainer</h1>
  </header>

  <main id="app"></main>

  <footer>
    <small>Practice smarter. Play music.</small>
  </footer>

  <!-- =====================================================
       BASE CONTENT (creates window.CONTENT)
  ====================================================== -->
  <script src="content/base.js?v=GT-001"></script>

  <!-- =====================================================
       PATCH: add SONGS bucket + allow CONTENT_ADD to merge songs
       (keeps your existing CONTENT_ADD pattern)
  ====================================================== -->
  <script>
    window.CONTENT = (window.CONTENT && typeof window.CONTENT === "object") ? window.CONTENT : {};
    window.CONTENT.songs = window.CONTENT.songs || {};

    // Extend existing CONTENT_ADD to also merge { songs: {...} }
    (function () {
      const prev = window.CONTENT_ADD;
      window.CONTENT_ADD = function (part) {
        if (typeof prev === "function") prev(part);
        if (part && typeof part === "object" && part.songs) {
          Object.assign(window.CONTENT.songs, part.songs);
        }
      };
    })();
  </script>

  <!-- =====================================================
       GENRE PACKS
  ====================================================== -->
  <script src="content/genres/blues.js?v=GT-001"></script>
  <script src="content/genres/funk.js?v=GT-001"></script>
  <script src="content/genres/rock.js?v=GT-001"></script>
  <script src="content/genres/metal.js?v=GT-001"></script>

  <!-- =====================================================
       SONG PACKS (ONE FILE PER SONG)
       IMPORTANT: load backing tracks BEFORE the song that references them
  ====================================================== -->
  <script src="content/songs/song1_tracks.js?v=GT-001"></script>
  <script src="content/songs/song1.js?v=GT-001"></script>
  <!-- song2_tracks.js then song2.js, etc -->

  <!-- =====================================================
       APP ENTRY
  ====================================================== -->
  <script type="module" src="app.js?v=GT-001"></script>
</body>
</html>
